language: java
jdk:
- oraclejdk8
cache:
  directories:
  - "$HOME/.m2/repository"
  - "$HOME/.sonar/cache"
env:
  global:
  - secure: fkZCb3tg+fH+kQrUNWhBqp902z6nzMi5KWa5HmNy6GhUug2xSf8+JlZhK+tw3cGy1uizK5a8eqeNr8Dg3dQqgWgbf3fLFa7/Tj5/u7i7azv5ToCNQXQ2WSw+IRb20YH/UJZt6uuoPdyjhdbOJIkje1t+Zy8g82d5UxQXND+JercI8gJIHe+OqT91vch17Uw40G639ljjIXIh15c+0Q53XaKnKV+ycvfgnAzYUttO/h/EnMsV+TbwDsKB3q8BFdEw0u8I8rmuQ3xpxFPz4Pm6REwtTyPa33H+7TjqX6JGg12VrpySOaez4eB7iarCDFZfA8Aua0TdtFGJIWv480qW0pL3vmGA74XE/xW5yXegTP9ypeZYEhLLc/NY7ESKHN56cjKUaN940WluC9hOC6bDoETqKcO91/m826puxEHcp2Wr9a4EwoHtUNTpvihHuRGlsPlUwnA6cmuEhj8jTVYjenXAxdl4JZJFpIHNYcvzNiGw9htOH8Mr+lbq7SBh4uEi9mRl9xkEXSp/gWPl4WB0yLuwupaaTxGj+ekMJhXFjrf10E7CmOHkN7lNmdK8mtuyl21DEi3y5VqQVtL7fHAhO00Sgs0WM0kW8S3cm3FlWRs+sn06hEpEHMs0JDhe+pAz9UfYg2nvLZLtO0lzUp/ljQfrUMT9K+j77Fs2lCiSkQk=
  - secure: fh9LoP/X2wJRJCzlZ+C2JxRYA8wqDTyvwtJbDDIwfGIzC01iHGiCDP/7apwRVmVZ0DWiYRyyloMiU6LgQ4YPEoWL5eRotWrTnXcsGfj0SbWmmXWqAUkcPlwhpCFiIUd5WvyBpJGPsLs7F0HK6OTIkPlOJdqR1O95W3+hSKyUZH5TznHroJEwIl2CqSFoO5m8rQDtWQECS4E7cKjPQjImi7SPZwUwZu/lgawgwtNQCYoXDWcfLsaVF0MX0Cn5Qzp8bxqI1Tmb+xrcDzTtVmrhk90PoxYgadoGF1wVdxua0oQw8goZYLbz6DJdmotOzKpkNKo3C9GOzoSjNaaRbugWt4FjDAmGLyIHA4OkcremPHj1vPOUCAd+G0+DqT/GvKFSOgWBO/Zwl5upACEGXqyxgHgqeBlqntW2RA3ZshXnn8Zrojr9TZIDkjsdZlAB4hiONtWFt1pYdB4tnkbxPif0FKUjMbnOr88uazu6MzyuLd6pW3J79up0ltMs7dl2Rp9hlUP902mfPKoNHtMJscNfdTDv7RvG82ZgfTuUTNntlSA8uaqsDXD7yQ5R7nR0AjWzk82Ii9bQvltGamWWUiiziPnRC1oH7U8gYTJf+rFOHqs2bYEj2lrA5WSmZwHODYMh7K2cy694/smL4OiDt7U2wjCFXjBzA171LoM5tqL46VA=
  - secure: rpnCL7tWWB0UN0EeTEXnpzaOd3awAIU9ts80yeY87N7L+YawhfnctSzRpvoE5SPDdMuCxkRMYnq0QVa8S//Sn0ozblxuMZuZqeZu4jmGT06yxSYsds2L+np9YQiaaSruneAvt1lIRGRfxo1Ffv9wXwkpp1dRfBrhgyWUWrBGV/KE3IMcj0ncHQrR89hnSXhBxIAAXczZCdlgu/iw9MnDPq3niCYRoZuQWdtCHzX7nTnVbIBOWuQwgg1xr3BUXPfpQGNctuzXHeZb69zfpFdhAQDi0FVJCTVaZbh7LSese9B0V2AxOShww3FBPv/9ptc3QKamyrprV1F5no+MdPEl7Y8hovBzHKWU1jMo4UeO/e6OESKec/dk8O/hIRun9LITeUfrZtB2lwTL3K75T4FB7KAdoOVPONAPgoMJU471xTM824CaeyKI0rPihh1z+Ntr+d4dH8SJvTDJHLhDuUjnoqUDwBck1FcskjwPkc1CCCrn/HIwuFngv7ihhydrZHC+K8f+sR/STNckio0zXjLiG4tL94QJQIFc+MgcgX1LioIpkWshlwXyUcZnJFvF1jK10t+PWPthWywOkeCRNEI4/1UQ3wAhqiCkmCHFaYfL8Kqb1fZunPbn/HT6Sm2r6GNtRi/d5LMyzrl4kMZOVp3HUk3KYYFLvoSi7oIqbBSu3Kc=
  - secure: dwNWREsyHQTfTEJrM19J52Mg5JJRFQjIwqMvf5G4QNxX7M54+Sjy7DpSWLXVB0RwIVyAqTQUGSBvKFI1RUW//Lu0sMm5ffK8+s4tmv26pwhz3N6y8tWGqZAL1JB5sGoLF61QWNOIIUbeGgPWm2IWYn7FUXsxL1UcBwTAIveoRX0ScaG8W1dgF460VMQs/771Kbk8651VRk7yzY4x4PqvKbcsl7+JiKHAmKuc3ZmwZFeUvzOu0hoAg9F6PA4fKptXnyn17IzA8adI+ciVIfa3y+HiNT70B4em0x1cjaoPq55tMlQPYt4NkA+RM7SwOVMT4Hbn/HMR0flwc2z7kllvMwsEQ3ye0ktT52atMysc96Xg2sjlbTj7/tgpbJKEPrnHb9nsLwTtLpGXYxLK6G5hwd9ZYaBhVW76Fv8McJs4sS9ocblvEqQCTp8UtydKWt/o1EdD2oUzmJFR/uoC0eLRkcnDsY/6zCwY4o/qbB/o5HaK7ABVgzktcACsOECq19Yn5pPLciqPzQ3MICOic4l8wHQzv16sXLCFXmCbnzEMCkKEgc9rTpDeo3iAzwdw2VnvsTR5jhEnK/evWJW9TdM7HtYE9aWonQxlhOTsoRn+y/fO5Io3fSvMj6uK79c3MHJDrIJIhf9Db+LBva9K9rFYiOh9ABmoH41tDpCeoFHYfUY=
addons:
  sonarcloud:
    organization: carml
    token: lW2y3BeVU30yDjPb0yHtH5ecVva+BxeUVubUN0k5rmRq30AP5kkhFOnv94fdTIjYAmks0HPR/uA7xDSmZjNitCZPlQwDDiJavxVJyEICXgkxjG54sDhtV1LvxrpdV3GEClx9OHmUu/AE7BQ//KmViEQWBBLFV4gsflVQdmkzO94SHBipUJNaxO1VjYslT+qv8/K9JkFpje9+8sdyQ5Y6HRyA+wPUuy2FrvPUXoKbWAyxpYisum6Gai8iwskKRR8hQ88pqkT2uYBtOeqVNBk4wV+42mFMlGt3DSFK339HDt/mfb2SosIKy++NjcF5cDnS5wEXlxz2RIvfllM3xrd9xioSMTufVs/wxclg2V4T9ExF0PLHTL6UO/vJr5hRu5BNZ/eaViKgv35NZRR/q4PzJZq+Lgpi6NwpYY84gujJ5IGISj9hyVtvKr6IDcWswryOTa7X63FIXzWshHU+53twpRzcctVIWJWsHNVm0eToVocxyMXKwUbRxlWhe48JSS4jFPAjXeSyKdNbkCuGEpr+av9wH98hsCA1U/kZGhCKuEUtmqrhw1H7Q6H2Pidq7Ag/5n5Y+KCgw/TqiLV/48FK/oXN9929hvMGwWlbjq+6RrgFedz/HRWp/m07sZrf+XsLH8z/HfwT9R3WV1d8s7lnvupQBiBcXGxIWCOonG1BOoo=
script:
- mvn clean org.jacoco:jacoco-maven-plugin:prepare-agent package sonar:sonar
before_deploy:
- openssl aes-256-cbc -K $encrypted_7ff5047ce11e_key -iv $encrypted_7ff5047ce11e_iv
  -in codesigning.asc.enc -out codesigning.asc -d
- gpg --fast-import codesigning.asc
deploy:
  provider: script
  script: cp .travis.settings.xml $HOME/.m2/settings.xml && mvn deploy -P release
  skip_cleanup: true
  on:
    branch: master
